!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("json2typescript"),require("rxjs/internal/observable/throwError"),require("rxjs"),require("rxjs/operators"),require("@angular/core"),require("@angular/common/http")):"function"==typeof define&&define.amd?define("@knora/core",["exports","@angular/common","json2typescript","rxjs/internal/observable/throwError","rxjs","rxjs/operators","@angular/core","@angular/common/http"],t):t((e.knora=e.knora||{},e.knora.core={}),e.ng.common,e.json2typescript,e.rxjs["internal/observable/throwError"],e.rxjs,e.rxjs.operators,e.ng.core,e.ng.common.http)}(this,function(b,e,r,n,i,p,a,s){"use strict";var u=new a.InjectionToken("KuiCoreConfigToken (knora.core.config)"),t=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[{provide:u,useValue:e}]}},t.decorators=[{type:a.NgModule,args:[{imports:[e.CommonModule,s.HttpClientModule],declarations:[],exports:[s.HttpClientModule]}]}],t}(),o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function l(e,t){function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function c(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(o=e[s])&&(a=(i<3?o(a):3<i?o(t,r,a):o(t,r))||a);return 3<i&&a&&Object.defineProperty(t,r,a),a}function d(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function k(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}var h,f=function(){function e(){this.name=undefined,this.app=undefined,this.api=undefined,this.media=undefined}return c([r.JsonProperty("name",String),d("design:type",String)],e.prototype,"name",void 0),c([r.JsonProperty("app",String),d("design:type",String)],e.prototype,"app",void 0),c([r.JsonProperty("api",String),d("design:type",String)],e.prototype,"api",void 0),c([r.JsonProperty("media",String),d("design:type",String)],e.prototype,"media",void 0),e=c([r.JsonObject("KuiCoreConfig")],e)}(),y=function(){function t(){this.status=0,this.statusText="",this.url=""}return t.prototype.getBody=function(e){return t.jsonConvert.deserialize(this.body,e)},t.jsonConvert=new r.JsonConvert(r.OperationMode.ENABLE,r.ValueCheckingMode.ALLOW_NULL),t}(),g=function lt(){this.status=0,this.statusText="",this.url="",this.errorInfo=""},E=function(){function e(){}return e.KnoraApi="http://api.knora.org/ontology/knora-api",e.PathSeparator="#",e.SystemProjectIRI=(e.KnoraBase=(e.KnoraOntologyPath="http://www.knora.org/ontology")+"/knora-base")+"#SystemProject",e.SystemAdminGroupIRI=e.KnoraBase+"#SystemAdmin",e.ProjectAdminGroupIRI=e.KnoraBase+"#ProjectAdmin",e.ProjectMemberGroupIRI=e.KnoraBase+"#ProjectMember",e.KnoraApiV2WithValueObjectPath=e.KnoraApi+"/v2"+e.PathSeparator,e.KnoraApiV2SimplePath=e.KnoraApi+"/simple/v2"+e.PathSeparator,e.SalsahGuiOrder=(e.SalsahGuiOntology="http://api.knora.org/ontology/salsah-gui/v2")+"#guiOrder",e.StandoffOntology="http://api.knora.org/ontology/standoff/v2",e.Resource=e.KnoraApiV2WithValueObjectPath+"Resource",e.TextValue=e.KnoraApiV2WithValueObjectPath+"TextValue",e.IntValue=e.KnoraApiV2WithValueObjectPath+"IntValue",e.BooleanValue=e.KnoraApiV2WithValueObjectPath+"BooleanValue",e.UriValue=e.KnoraApiV2WithValueObjectPath+"UriValue",e.DecimalValue=e.KnoraApiV2WithValueObjectPath+"DecimalValue",e.DateValue=e.KnoraApiV2WithValueObjectPath+"DateValue",e.ColorValue=e.KnoraApiV2WithValueObjectPath+"ColorValue",e.GeomValue=e.KnoraApiV2WithValueObjectPath+"GeomValue",e.ListValue=e.KnoraApiV2WithValueObjectPath+"ListValue",e.IntervalValue=e.KnoraApiV2WithValueObjectPath+"IntervalValue",e.LinkValue=e.KnoraApiV2WithValueObjectPath+"LinkValue",e.GeonameValue=e.KnoraApiV2WithValueObjectPath+"GeonameValue",e.FileValue=e.KnoraApiV2WithValueObjectPath+"FileValue",e.AudioFileValue=e.KnoraApiV2WithValueObjectPath+"AudioFileValue",e.DDDFileValue=e.KnoraApiV2WithValueObjectPath+"DDDFileValue",e.DocumentFileValue=e.KnoraApiV2WithValueObjectPath+"DocumentFileValue",e.StillImageFileValue=e.KnoraApiV2WithValueObjectPath+"StillImageFileValue",e.MovingImageFileValue=e.KnoraApiV2WithValueObjectPath+"MovingImageFileValue",e.TextFileValue=e.KnoraApiV2WithValueObjectPath+"TextFileValue",e.IsResourceClass=e.KnoraApiV2WithValueObjectPath+"isResourceClass",e.IsValueClass=e.KnoraApiV2WithValueObjectPath+"isValueClass",e.ForbiddenResource=e.KnoraApiV2WithValueObjectPath+"ForbiddenResource",e.XMLToStandoffMapping=e.KnoraApiV2WithValueObjectPath+"XMLToStandoffMapping",e.ListNode=e.KnoraApiV2WithValueObjectPath+"ListNode",e.ArkUrl=e.KnoraApiV2WithValueObjectPath+"arkUrl",e.versionArkUrl=e.KnoraApiV2WithValueObjectPath+"versionArkUrl",e.ObjectType=e.KnoraApiV2WithValueObjectPath+"objectType",e.ResourceIcon=e.KnoraApiV2WithValueObjectPath+"resourceIcon",e.isEditable=e.KnoraApiV2WithValueObjectPath+"isEditable",e.isLinkProperty=e.KnoraApiV2WithValueObjectPath+"isLinkProperty",e.isLinkValueProperty=e.KnoraApiV2WithValueObjectPath+"isLinkValueProperty",e.hasGeometry=e.KnoraApiV2WithValueObjectPath+"hasGeometry",e.schemaName="http://schema.org/name",e.schemaNumberOfItems="http://schema.org/numberOfItems",e.schemaItemListElement="http://schema.org/itemListElement",e.RdfProperty="http://www.w3.org/1999/02/22-rdf-syntax-ns#Property",e.RdfsLabel=(e.RdfsSchema="http://www.w3.org/2000/01/rdf-schema"+e.PathSeparator)+"label",e.RdfsComment=e.RdfsSchema+"comment",e.RdfsSubclassOf=e.RdfsSchema+"subClassOf",e.subPropertyOf=e.RdfsSchema+"subPropertyOf",e.OwlClass=(e.owl="http://www.w3.org/2002/07/owl")+"#Class",e.OwlObjectProperty=e.owl+"#ObjectProperty",e.OwlDatatypeProperty=e.owl+"#DatatypeProperty",e.OwlAnnotationProperty=e.owl+"#AnnotationProperty",e.OwlOnProperty=e.owl+"#onProperty",e.OwlMaxCardinality=e.owl+"#maxCardinality",e.OwlMinCardinality=e.owl+"#minCardinality",e.OwlCardinality=e.owl+"#cardinality",e.OwlRestriction=e.owl+"#Restriction",e.creationDate=e.KnoraApiV2WithValueObjectPath+"creationDate",e.lastModificationDate=e.KnoraApiV2WithValueObjectPath+"lastModificationDate",e.hasPermissions=e.KnoraApiV2WithValueObjectPath+"hasPermissions",e.userHasPermission=e.KnoraApiV2WithValueObjectPath+"userHasPermission",e.attachedToProject=e.KnoraApiV2WithValueObjectPath+"attachedToProject",e.attachedToUser=e.KnoraApiV2WithValueObjectPath+"attachedToUser",e.Region=e.KnoraApiV2WithValueObjectPath+"Region",e.ReadTextValueAsHtml="ReadTextValueAsHtml",e.ReadTextValueAsString="ReadTextValueAsString",e.ReadTextValueAsXml="ReadTextValueAsXml",e.ReadDateValue="ReadDateValue",e.ReadLinkValue="ReadLinkValue",e.ReadIntegerValue="ReadIntegerValue",e.ReadDecimalValue="ReadDecimalValue",e.ReadStillImageFileValue="ReadStillImageFileValue",e.ReadMovingImageFileValue="ReadMovingImageFileValue",e.ReadAudioFileValue="ReadAudioFileValue",e.ReadTextFileValue="ReadTextFileValue",e.ReadGeomValue="ReadGeomValue",e.ReadColorValue="ReadColorValue",e.ReadUriValue="ReadUriValue",e.ReadBooleanValue="ReadBooleanValue",e.ReadIntervalValue="ReadIntervalValue",e.ReadListValue="ReadListValue",e.valueAsString=e.KnoraApiV2WithValueObjectPath+"valueAsString",e.textValueAsHtml=e.KnoraApiV2WithValueObjectPath+"textValueAsHtml",e.textValueAsXml=e.KnoraApiV2WithValueObjectPath+"textValueAsXml",e.textValueHasMapping=e.KnoraApiV2WithValueObjectPath+"textValueHasMapping",e.hasStandoffLinkToValue=e.KnoraApiV2WithValueObjectPath+"hasStandoffLinkToValue",e.dateValueHasStartYear=e.KnoraApiV2WithValueObjectPath+"dateValueHasStartYear",e.dateValueHasEndYear=e.KnoraApiV2WithValueObjectPath+"dateValueHasEndYear",e.dateValueHasStartEra=e.KnoraApiV2WithValueObjectPath+"dateValueHasStartEra",e.dateValueHasEndEra=e.KnoraApiV2WithValueObjectPath+"dateValueHasEndEra",e.dateValueHasStartMonth=e.KnoraApiV2WithValueObjectPath+"dateValueHasStartMonth",e.dateValueHasEndMonth=e.KnoraApiV2WithValueObjectPath+"dateValueHasEndMonth",e.dateValueHasStartDay=e.KnoraApiV2WithValueObjectPath+"dateValueHasStartDay",e.dateValueHasEndDay=e.KnoraApiV2WithValueObjectPath+"dateValueHasEndDay",e.dateValueHasCalendar=e.KnoraApiV2WithValueObjectPath+"dateValueHasCalendar",e.linkValueHasTarget=e.KnoraApiV2WithValueObjectPath+"linkValueHasTarget",e.linkValueHasSource=e.KnoraApiV2WithValueObjectPath+"linkValueHasSource",e.linkValueHasSourceIri=e.KnoraApiV2WithValueObjectPath+"linkValueHasSourceIri",e.linkValueHasTargetIri=e.KnoraApiV2WithValueObjectPath+"linkValueHasTargetIri",e.integerValueAsInteger=e.KnoraApiV2WithValueObjectPath+"intValueAsInt",e.decimalValueAsDecimal=e.KnoraApiV2WithValueObjectPath+"decimalValueAsDecimal",e.fileValueAsUrl=e.KnoraApiV2WithValueObjectPath+"fileValueAsUrl",e.fileValueIsPreview=e.KnoraApiV2WithValueObjectPath+"fileValueIsPreview",e.fileValueHasFilename=e.KnoraApiV2WithValueObjectPath+"fileValueHasFilename",e.hasStillImageFileValue=e.KnoraApiV2WithValueObjectPath+"hasStillImageFileValue",e.stillImageFileValueHasDimX=e.KnoraApiV2WithValueObjectPath+"stillImageFileValueHasDimX",e.stillImageFileValueHasDimY=e.KnoraApiV2WithValueObjectPath+"stillImageFileValueHasDimY",e.stillImageFileValueHasIIIFBaseUrl=e.KnoraApiV2WithValueObjectPath+"stillImageFileValueHasIIIFBaseUrl",e.colorValueAsColor=e.KnoraApiV2WithValueObjectPath+"colorValueAsColor",e.geometryValueAsGeometry=e.KnoraApiV2WithValueObjectPath+"geometryValueAsGeometry",e.uriValueAsUri=e.KnoraApiV2WithValueObjectPath+"uriValueAsUri",e.booleanValueAsBoolean=e.KnoraApiV2WithValueObjectPath+"booleanValueAsBoolean",e.intervalValueHasStart=e.KnoraApiV2WithValueObjectPath+"intervalValueHasStart",e.intervalValueHasEnd=e.KnoraApiV2WithValueObjectPath+"intervalValueHasEnd",e.listValueAsListNode=e.KnoraApiV2WithValueObjectPath+"listValueAsListNode",e.listValueAsListNodeLabel=e.KnoraApiV2WithValueObjectPath+"listValueAsListNodeLabel",e.xsdString=(e.Xsd="http://www.w3.org/2001/XMLSchema#")+"string",e.xsdBoolean=e.Xsd+"boolean",e.xsdInteger=e.Xsd+"integer",e.xsdDecimal=e.Xsd+"decimal",e.xsdUri=e.Xsd+"anyURI",e.resourceSimple=e.KnoraApiV2SimplePath+"Resource",e.dateSimple=e.KnoraApiV2SimplePath+"Date",e.intervalSimple=e.KnoraApiV2SimplePath+"Interval",e.geomSimple=e.KnoraApiV2SimplePath+"Geom",e.colorSimple=e.KnoraApiV2SimplePath+"Color",e.geonameSimple=e.KnoraApiV2SimplePath+"Geoname",e.fileSimple=e.KnoraApiV2SimplePath+"File",e.matchFunction=e.KnoraApiV2SimplePath+"match",e.EqualsComparisonOperator="=",e.EqualsComparisonLabel="is equal to",e.NotEqualsComparisonOperator="!=",e.NotEqualsComparisonLabel="is not equal to",e.GreaterThanComparisonOperator=">",e.GreaterThanComparisonLabel="is greater than",e.GreaterThanEqualsComparisonOperator=">=",e.GreaterThanEqualsComparisonLabel="is greater than equals to",e.LessThanComparisonOperator="<",e.LessThanComparisonLabel="is less than",e.LessThanEqualsComparisonOperator="<=",e.LessThanQualsComparisonLabel="is less than equals to",e.ExistsComparisonOperator="E",e.ExistsComparisonLabel="exists",e.LikeComparisonOperator="regex",e.LikeComparisonLabel="is like",e.MatchComparisonOperator="contains",e.MatchComparisonLabel="matches",e.SalsahLink="salsah-link",e.RefMarker="ref-marker",e.GNDPrefix="(DE-588)",e.GNDResolver="http://d-nb.info/gnd/",e.VIAFPrefix="(VIAF)",e.VIAFResolver="https://viaf.org/viaf/",e}();(h=b.KnoraSchema||(b.KnoraSchema={}))[h.complex=0]="complex",h[h.simple=1]="simple";var m,v=function(){function e(){}return e.getOntologyIriFromEntityIri=function(e){var t=e.split(E.PathSeparator);return 2!==t.length&&console.error("Error: "+e+" is not a valid entity IRI."),t[0]},e.convertComplexKnoraApiEntityIritoSimple=function(e){var t=e.split("v2"+E.PathSeparator);return 2!==t.length&&console.error("Error: "+e+" is not a valid entity IRI."),t[0]+"simple/v2"+E.PathSeparator+t[1]},e.RegexEmail=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,e.RegexUsername=/^[a-zA-Z0-9]+$/,e.RegexUrl=/^(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/)?[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,6}(:[0-9]{1,5})?(\/.*)?$/i,e.RegexPassword=/^(?=.*\d)(?=.*[a-zA-Z]).{8,}$/i,e.RegexHex=/^[0-9A-Fa-f]+$/,e.RegexShortname=/^[a-zA-Z]+\S*$/,e.filterOutDuplicates=function(e,t,r){return t===r.indexOf(e)},e}(),V=function(){function e(){this.value=undefined,this.language=""}return c([r.JsonProperty("value",String,!1),d("design:type",String)],e.prototype,"value",void 0),c([r.JsonProperty("language",String,!0),d("design:type",String)],e.prototype,"language",void 0),e=c([r.JsonObject("StringLiteral")],e)}();(m=b.Precision||(b.Precision={}))[m.yearPrecision=0]="yearPrecision",m[m.monthPrecision=1]="monthPrecision",m[m.dayPrecision=2]="dayPrecision";var S,P=function(){function t(e,t,r,n,o){this.calendar=e,this.era=t,this.year=r,this.month=n,this.day=o,this.month===undefined?this.precision=b.Precision.yearPrecision:this.day===undefined?this.precision=b.Precision.monthPrecision:this.precision=b.Precision.dayPrecision}return t.prototype.getDateAsStringWithoutCalendar=function(){var e="("+this.era+") ";switch(this.precision){case b.Precision.yearPrecision:e+=this.year.toString();break;case b.Precision.monthPrecision:e+=this.year+t.separator+this.month;break;case b.Precision.dayPrecision:e+=this.year+t.separator+this.month+t.separator+this.day}return e},t.prototype.getDateAsString=function(){return this.calendar+":"+this.getDateAsStringWithoutCalendar()},t.separator="-",t}(),R=function(){function e(e,t){this.start=e,this.end=t}return e.prototype.getDateAsString=function(){return this.start.getDateAsString()+":"+this.end.getDateAsStringWithoutCalendar()},e}(),O=function(){function e(){this.token=undefined}return c([r.JsonProperty("token",String),d("design:type",String)],e.prototype,"token",void 0),e=c([r.JsonObject("AuthenticationResponse")],e)}(),I=function(){function e(){this.id=undefined,this.shortname=undefined,this.shortcode=undefined,this.longname=undefined,this.description=[new V],this.keywords=undefined,this.logo=undefined,this.institution=undefined,this.ontologies=undefined,this.status=undefined,this.selfjoin=undefined}return c([r.JsonProperty("id",String),d("design:type",String)],e.prototype,"id",void 0),c([r.JsonProperty("shortname",String),d("design:type",String)],e.prototype,"shortname",void 0),c([r.JsonProperty("shortcode",String,!0),d("design:type",String)],e.prototype,"shortcode",void 0),c([r.JsonProperty("longname",String,!0),d("design:type",String)],e.prototype,"longname",void 0),c([r.JsonProperty("description",[V],!0),d("design:type",Array)],e.prototype,"description",void 0),c([r.JsonProperty("keywords",[String],!0),d("design:type",Array)],e.prototype,"keywords",void 0),c([r.JsonProperty("logo",String,!0),d("design:type",String)],e.prototype,"logo",void 0),c([r.JsonProperty("institution",String,!0),d("design:type",String)],e.prototype,"institution",void 0),c([r.JsonProperty("ontologies",[String]),d("design:type",Array)],e.prototype,"ontologies",void 0),c([r.JsonProperty("status",Boolean),d("design:type",Boolean)],e.prototype,"status",void 0),c([r.JsonProperty("selfjoin",Boolean),d("design:type",Boolean)],e.prototype,"selfjoin",void 0),e=c([r.JsonObject("Project")],e)}(),C=function(){function e(){this.id=undefined,this.name=undefined,this.description=undefined,this.project=undefined,this.status=undefined,this.selfjoin=undefined}return c([r.JsonProperty("id",String),d("design:type",String)],e.prototype,"id",void 0),c([r.JsonProperty("name",String),d("design:type",String)],e.prototype,"name",void 0),c([r.JsonProperty("description",String),d("design:type",String)],e.prototype,"description",void 0),c([r.JsonProperty("project",I,!1),d("design:type",I)],e.prototype,"project",void 0),c([r.JsonProperty("status",Boolean),d("design:type",Boolean)],e.prototype,"status",void 0),c([r.JsonProperty("selfjoin",Boolean),d("design:type",Boolean)],e.prototype,"selfjoin",void 0),e=c([r.JsonObject("Group")],e)}(),j=function(){function e(){this.group=undefined}return c([r.JsonProperty("group",C),d("design:type",C)],e.prototype,"group",void 0),e=c([r.JsonObject("GroupResponse")],e)}(),A=function(){function e(){this.groups=undefined}return c([r.JsonProperty("groups",[C]),d("design:type",Array)],e.prototype,"groups",void 0),e=c([r.JsonObject("GroupsResponse")],e)}(),w=function(){function e(){this.id=undefined,this.projectIri=undefined,this.labels=undefined,this.comments=undefined}return c([r.JsonProperty("id",String,!1),d("design:type",String)],e.prototype,"id",void 0),c([r.JsonProperty("projectIri",String,!1),d("design:type",String)],e.prototype,"projectIri",void 0),c([r.JsonProperty("labels",[V],!0),d("design:type",Array)],e.prototype,"labels",void 0),c([r.JsonProperty("comments",[V],!0),d("design:type",Array)],e.prototype,"comments",void 0),e=c([r.JsonObject("ListInfo")],e)}(),L=function(){function e(){this.id=undefined,this.name=undefined,this.label=undefined,this.children=undefined,this.level=undefined,this.position=undefined}var t;return t=e,c([r.JsonProperty("id",String,!1),d("design:type",String)],e.prototype,"id",void 0),c([r.JsonProperty("name",String,!0),d("design:type",String)],e.prototype,"name",void 0),c([r.JsonProperty("label",String,!0),d("design:type",String)],e.prototype,"label",void 0),c([r.JsonProperty("children",[t],!0),d("design:type",Array)],e.prototype,"children",void 0),c([r.JsonProperty("level",Number,!0),d("design:type",Number)],e.prototype,"level",void 0),c([r.JsonProperty("position",Number,!0),d("design:type",Number)],e.prototype,"position",void 0),e=t=c([r.JsonObject("ListNode")],e)}(),x=function(){function e(){this.listinfo=undefined,this.children=undefined}return c([r.JsonProperty("listinfo",w,!1),d("design:type",w)],e.prototype,"listinfo",void 0),c([r.JsonProperty("children",[L],!1),d("design:type",Array)],e.prototype,"children",void 0),e=c([r.JsonObject("List")],e)}(),F=function(){function e(){this.listinfo=undefined}return c([r.JsonProperty("listinfo",w,!1),d("design:type",w)],e.prototype,"listinfo",void 0),e=c([r.JsonObject("ListInfoResponse")],e)}(),T=function(){function e(){this.id=undefined,this.name=undefined,this.projectIri=undefined,this.isRootNode=undefined,this.labels=undefined,this.comments=undefined}return c([r.JsonProperty("id",String),d("design:type",String)],e.prototype,"id",void 0),c([r.JsonProperty("name",String,!0),d("design:type",String)],e.prototype,"name",void 0),c([r.JsonProperty("projectIri",String,!0),d("design:type",String)],e.prototype,"projectIri",void 0),c([r.JsonProperty("isRootNode",Boolean,!0),d("design:type",Boolean)],e.prototype,"isRootNode",void 0),c([r.JsonProperty("labels",[V]),d("design:type",Array)],e.prototype,"labels",void 0),c([r.JsonProperty("comments",[V]),d("design:type",Array)],e.prototype,"comments",void 0),e=c([r.JsonObject("ListNodeInfo")],e)}(),D=function(){function e(){this.nodeinfo=undefined}return c([r.JsonProperty("nodeinfo",T,!1),d("design:type",T)],e.prototype,"nodeinfo",void 0),e=c([r.JsonObject("ListNodeInfoResponse")],e)}(),J=function(){function e(){this.list=undefined}return c([r.JsonProperty("list",x,!1),d("design:type",x)],e.prototype,"list",void 0),e=c([r.JsonObject("ListResponse")],e)}(),N=function(){function e(){this.lists=undefined}return c([r.JsonProperty("lists",[T],!1),d("design:type",Array)],e.prototype,"lists",void 0),e=c([r.JsonObject("ListsResponse")],e)}(),U=function(){function e(){this.ontologyIri=undefined,this.ontologyName=undefined}return c([r.JsonProperty("ontologyIri",String),d("design:type",String)],e.prototype,"ontologyIri",void 0),c([r.JsonProperty("ontologyName",String),d("design:type",String)],e.prototype,"ontologyName",void 0),e=c([r.JsonObject("OntologyInfoShort")],e)}(),H=function(){function e(){this.groupsPerProject=undefined,this.administrativePermissionsPerProject=undefined}return c([r.JsonProperty("groupsPerProject",Object),d("design:type",Object)],e.prototype,"groupsPerProject",void 0),c([r.JsonProperty("administrativePermissionsPerProject",Object),d("design:type",Object)],e.prototype,"administrativePermissionsPerProject",void 0),e=c([r.JsonObject("PermissionData")],e)}(),K=function(){function e(){this.id=undefined,this.email=undefined,this.username=undefined,this.password=undefined,this.token=undefined,this.givenName=undefined,this.familyName=undefined,this.status=undefined,this.lang=undefined,this.groups=undefined,this.projects=undefined,this.sessionId=undefined,this.permissions=undefined,this.systemAdmin=!1}return c([r.JsonProperty("id",String),d("design:type",String)],e.prototype,"id",void 0),c([r.JsonProperty("email",String),d("design:type",String)],e.prototype,"email",void 0),c([r.JsonProperty("username",String),d("design:type",String)],e.prototype,"username",void 0),c([r.JsonProperty("password",String,!0),d("design:type",String)],e.prototype,"password",void 0),c([r.JsonProperty("token",String,!0),d("design:type",String)],e.prototype,"token",void 0),c([r.JsonProperty("givenName",String),d("design:type",String)],e.prototype,"givenName",void 0),c([r.JsonProperty("familyName",String),d("design:type",String)],e.prototype,"familyName",void 0),c([r.JsonProperty("status",Boolean),d("design:type",Boolean)],e.prototype,"status",void 0),c([r.JsonProperty("lang",String),d("design:type",String)],e.prototype,"lang",void 0),c([r.JsonProperty("groups",[C]),d("design:type",Array)],e.prototype,"groups",void 0),c([r.JsonProperty("projects",[I]),d("design:type",Array)],e.prototype,"projects",void 0),c([r.JsonProperty("sessionId",String,!0),d("design:type",String)],e.prototype,"sessionId",void 0),c([r.JsonProperty("permissions",H),d("design:type",H)],e.prototype,"permissions",void 0),c([r.JsonProperty("systemAdmin",Boolean,!0),d("design:type",Boolean)],e.prototype,"systemAdmin",void 0),e=c([r.JsonObject("User")],e)}(),M=function(){function e(){this.members=undefined}return c([r.JsonProperty("members",[K]),d("design:type",Array)],e.prototype,"members",void 0),e=c([r.JsonObject("ProjectMembersResponse")],e)}(),W=function(){function e(){this.project=undefined}return c([r.JsonProperty("project",I),d("design:type",I)],e.prototype,"project",void 0),e=c([r.JsonObject("ProjectResponse")],e)}(),G=function(){function e(){this.projects=undefined}return c([r.JsonProperty("projects",[I]),d("design:type",Array)],e.prototype,"projects",void 0),e=c([r.JsonObject("ProjectsResponse")],e)}(),B=function(){function e(){this.users=undefined}return c([r.JsonProperty("users",[K]),d("design:type",Array)],e.prototype,"users",void 0),e=c([r.JsonObject("UsersResponse")],e)}(),q=function(){function e(){this.user=undefined}return c([r.JsonProperty("user",K),d("design:type",K)],e.prototype,"user",void 0),e=c([r.JsonObject("UserResponse")],e)}(),X=function ct(){this.type=E.TextValue},_=function(o){function e(e,t,r){var n=o.call(this)||this;return n.id=e,n.propIri=t,n.str=r,n}return l(e,o),e.prototype.getClassName=function(){return E.ReadTextValueAsString},e.prototype.getContent=function(){return this.str},e}(X),Y=function dt(){},Q=function(i){function e(e,t,r,n){var o=i.call(this)||this;return o.id=e,o.propIri=t,o.html=r,o.referredResources=n,o}return l(e,i),e.prototype.getReferredResourceInfo=function(e,t){if(this.referredResources===undefined||this.referredResources[e]===undefined)return"no information found about referred resource (target of standoff link)";var r=t.getLabelForResourceClass(this.referredResources[e].type);return this.referredResources[e].label+" ("+r+")"},e.prototype.getClassName=function(){return E.ReadTextValueAsHtml},e.prototype.getContent=function(){return this.html},e}(X),z=function(i){function e(e,t,r,n){var o=i.call(this)||this;return o.id=e,o.propIri=t,o.xml=r,o.mappingIri=n,o}return l(e,i),e.prototype.getClassName=function(){return E.ReadTextValueAsXml},e.prototype.getContent=function(){return this.xml},e}(X),$=function(){function e(e,t,r,n,o,i,a,s,u,p,l){this.id=e,this.propIri=t,this.calendar=r,this.startYear=n,this.endYear=o,this.startEra=i,this.endEra=a,this.startMonth=s,this.endMonth=u,this.startDay=p,this.endDay=l,this.type=E.DateValue,this.separator="/"}return e.prototype.getDateSalsah=function(){return this.startYear===this.endYear&&this.startMonth===this.endMonth&&this.startDay===this.endDay&&this.startEra===this.endEra?new P(this.calendar,this.startEra,this.startYear,this.startMonth,this.startDay):new R(new P(this.calendar,this.startEra,this.startYear,this.startMonth,this.startDay),new P(this.calendar,this.endEra,this.endYear,this.endMonth,this.endDay))},e.prototype.getClassName=function(){return E.ReadDateValue},e.prototype.getContent=function(){return this.getDateSalsah().getDateAsString()},e}(),Z=function(){function e(e,t,r,n){this.id=e,this.propIri=t,this.referredResourceIri=r,this.referredResource=n,this.type=E.LinkValue}return e.prototype.getReferredResourceInfo=function(e){if(this.referredResource===undefined)return this.referredResourceIri;var t=e.getLabelForResourceClass(this.referredResource.type);return this.referredResource.label+" ("+t+")"},e.prototype.getClassName=function(){return E.ReadLinkValue},e.prototype.getContent=function(){return this.referredResource!==undefined?this.referredResource.label:this.referredResourceIri},e}(),ee=function(){function e(e,t,r){this.id=e,this.propIri=t,this.integer=r,this.type=E.IntValue}return e.prototype.getClassName=function(){return E.ReadIntegerValue},e.prototype.getContent=function(){return this.integer.toString()},e}(),te=function(){function e(e,t,r){this.id=e,this.propIri=t,this.decimal=r,this.type=E.DecimalValue}return e.prototype.getClassName=function(){return E.ReadDecimalValue},e.prototype.getContent=function(){return this.decimal.toString()},e}(),re=function(){function e(e,t,r,n,o,i,a){this.id=e,this.propIri=t,this.imageFilename=r,this.imageServerIIIFBaseURL=n,this.imagePath=o,this.dimX=i,this.dimY=a,this.type=E.StillImageFileValue,this.isPreview=r.endsWith(".jpg")}return e.prototype.makeIIIFUrl=function(e){if(this.isPreview)return this.imagePath;var t=Math.floor(100/e);return t=0<t&&t<=100?t:50,this.imageServerIIIFBaseURL+"/"+this.imageFilename+"/full/pct:"+t.toString()+"/0/default.jpg"},e.prototype.getClassName=function(){return E.ReadStillImageFileValue},e.prototype.getContent=function(){return this.imagePath},e}(),ne=function(){function e(e,t,r,n,o,i,a,s,u,p){this.id=e,this.propIri=t,this.filename=r,this.mediaServerIIIFBaseURL=n,this.path=o,this.dimX=i,this.dimY=a,this.duration=s,this.fps=u,this.aspectRatio=p,this.type=E.MovingImageFileValue}return e.prototype.getClassName=function(){return E.ReadMovingImageFileValue},e.prototype.getContent=function(){return this.path},e}(),oe=function(){function e(e,t,r,n){this.id=e,this.propIri=t,this.textFilename=r,this.textFileURL=n,this.type=E.TextFileValue}return e.prototype.getClassName=function(){return E.ReadTextFileValue},e.prototype.getContent=function(){return this.textFileURL},e}(),ie=function(){function e(e,t,r){this.id=e,this.propIri=t,this.colorHex=r,this.type=E.ColorValue}return e.prototype.getClassName=function(){return E.ReadColorValue},e.prototype.getContent=function(){return this.colorHex},e}(),ae=function ht(e,t){this.x=e,this.y=t},se=function ft(e,t,r,n,o,i){this.status=e,this.lineColor=t,this.lineWidth=r,this.points=n,this.type=o,this.radius=i},ue=function(){function e(e,t,r){var n,o;this.id=e,this.propIri=t,this.geometryString=r,this.type=E.GeomValue;var i,a=JSON.parse(r),s=[];try{for(var u=k(a.points),p=u.next();!p.done;p=u.next()){var l=p.value;s.push(new ae(l.x,l.y))}}catch(c){n={error:c}}finally{try{p&&!p.done&&(o=u["return"])&&o.call(u)}finally{if(n)throw n.error}}a.radius&&(i=new ae(a.radius.x,a.radius.y)),this.geometry=new se(a.status,a.lineColor,a.lineWidth,s,a.type,i)}return e.prototype.getClassName=function(){return E.ReadGeomValue},e.prototype.getContent=function(){return this.geometryString},e}(),pe=function(){function e(e,t,r){this.id=e,this.propIri=t,this.uri=r,this.type=E.UriValue}return e.prototype.getClassName=function(){return E.ReadUriValue},e.prototype.getContent=function(){return this.uri},e}(),le=function(){function e(e,t,r){this.id=e,this.propIri=t,this.bool=r,this.type=E.BooleanValue}return e.prototype.getClassName=function(){return E.ReadBooleanValue},e.prototype.getContent=function(){return this.bool.toString()},e}(),ce=function(){function e(e,t,r,n){this.id=e,this.propIri=t,this.intervalStart=r,this.intervalEnd=n,this.type=E.IntervalValue}return e.prototype.getClassName=function(){return E.ReadIntervalValue},e.prototype.getContent=function(){return this.intervalStart.toString()+"-"+this.intervalEnd},e}(),de=function(){function e(e,t,r,n){this.id=e,this.propIri=t,this.listNodeIri=r,this.listNodeLabel=n,this.type=E.ListValue}return e.prototype.getClassName=function(){return E.ReadListValue},e.prototype.getContent=function(){return this.listNodeLabel},e}(),he=function yt(e,t,r,n,o,i,a,s){this.id=e,this.type=t,this.label=r,this.incomingRegions=n,this.incomingStillImageRepresentations=o,this.incomingLinks=i,this.stillImageRepresentationsToDisplay=a,this.properties=s},fe=function gt(e,t,r,n,o,i,a,s){this.id=e,this.type=t,this.label=r,this.incomingAnnotations=n,this.incomingFileRepresentations=o,this.incomingLinks=i,this.fileRepresentationsToDisplay=a,this.properties=s},ye=require("jsonld"),ge=function(){function e(e,t){this.http=e,this.config=t,this.loading=!1}return e.prototype.httpGet=function(r,e){var n=this;return this.loading=!0,this.http.get(this.config.api+r,{observe:"response",params:e}).pipe(p.map(function(e){n.loading=!1;var t=new y;return t.status=e.status,t.statusText=e.statusText,t.url=r,t.body=e.body,t}),p.catchError(function(e){return n.loading=!1,n.handleRequestError(e)}))},e.prototype.processJSONLD=function(e){var t=ye.promises.compact(e.body,{});return i.from(t)},e.prototype.httpPost=function(r,e){var n=this;return this.loading=!0,this.http.post(this.config.api+r,e,{observe:"response"}).pipe(p.map(function(e){n.loading=!1;var t=new y;return t.status=e.status,t.statusText=e.statusText,t.url=r,t.body=e.body,t}),p.catchError(function(e){return n.loading=!1,n.handleRequestError(e)}))},e.prototype.httpPut=function(r,e){var n=this;return this.loading=!0,this.http.put(this.config.api+r,e,{observe:"response"}).pipe(p.map(function(e){n.loading=!1;var t=new y;return t.status=e.status,t.statusText=e.statusText,t.url=r,t.body=e.body,t}),p.catchError(function(e){return n.loading=!1,n.handleRequestError(e)}))},e.prototype.httpDelete=function(r){var n=this;return this.loading=!0,this.http["delete"](this.config.api+r,{observe:"response"}).pipe(p.map(function(e){n.loading=!1;var t=new y;return t.status=e.status,t.statusText=e.statusText,t.url=r,t.body=e.body,t}),p.catchError(function(e){return n.loading=!1,n.handleRequestError(e)}))},e.prototype.handleRequestError=function(e){var t=new g;return t.status=e.status,t.statusText=e.statusText,t.errorInfo=e.message,t.url=e.url,n.throwError(t)},e.prototype.handleJsonError=function(e){if(e instanceof g)return n.throwError(e);var t=new g;return t.status=-1,t.statusText="Invalid JSON",t.errorInfo=e,t.url="",n.throwError(t)},e.decorators=[{type:a.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:s.HttpClient},{type:undefined,decorators:[{type:a.Inject,args:[u]}]}]},e.ngInjectableDef=a.defineInjectable({factory:function(){return new e(a.inject(s.HttpClient),a.inject(u))},token:e,providedIn:"root"}),e}(),me=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.getOntologiesMetadata=function(){return this.httpGet("/v2/ontologies/metadata")},t.prototype.getAllOntologies=function(){return this.httpGet("/v2/ontologies/metadata")},t.prototype.getProjectOntologies=function(e){return this.httpGet("/v2/ontologies/metadata/"+encodeURIComponent(e))},t.prototype.getAllEntityDefinitionsForOntologies=function(e){return this.httpGet("/v2/ontologies/allentities/"+encodeURIComponent(e))},t.prototype.getResourceClasses=function(e){if(0===e.length)return i.Observable.create(function(e){return e.error("No resource class Iris given for call of OntologyService.getResourceClasses")});var t="";return e.forEach(function(e){t=t+"/"+encodeURIComponent(e.toString())}),this.httpGet("/v2/ontologies/classes"+t)},t.prototype.getProperties=function(e){if(0===e.length)return i.Observable.create(function(e){return e.error("No property Iris given for call of OntologyService.getProperties")});var t="";return e.forEach(function(e){t=t+"/"+encodeURIComponent(e.toString())}),this.httpGet("/v2/ontologies/properties"+t)},t.prototype.createOntology=function(e){var t={"knora-api:ontologyName":e.name,"knora-api:attachedToProject":{"@id":e.projectIri},"rdfs:label":e.label,"@context":{rdfs:E.RdfsSchema,"knora-api":E.KnoraApiV2WithValueObjectPath}};return this.httpPost("/v2/ontologies",t).pipe(p.map(function(e){return e.body}),p.catchError(this.handleJsonError))},t.decorators=[{type:a.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=a.defineInjectable({factory:function(){return new t(a.inject(s.HttpClient),a.inject(u))},token:t,providedIn:"root"}),t}(ge),ve=require("jsonld"),Ve=function(r){function e(e){var t=r.call(this,e)||this;return t.message=e,t}return l(e,r),e}(Error),Se=function mt(e,t){this.id=e,this.label=t};(S=b.CardinalityOccurrence||(b.CardinalityOccurrence={}))[S.minCard=0]="minCard",S[S.card=1]="card",S[S.maxCard=2]="maxCard";var be=function vt(e,t,r){this.occurrence=e,this.value=t,this.property=r},Pe=function Vt(e,t){this.value=e,this.property=t},Re=function St(e,t,r,n,o,i){this.id=e,this.icon=t,this.comment=r,this.label=n,this.cardinalities=o,this.guiOrder=i},Oe=function bt(){},Ie=function Pt(e,t,r,n,o,i,a,s){this.id=e,this.objectType=t,this.comment=r,this.label=n,this.subPropertyOf=o,this.isEditable=i,this.isLinkProperty=a,this.isLinkValueProperty=s},Ce=function Rt(){},je=function Ot(){},Ae=function It(){this.ontologies=[],this.resourceClassIrisForOntology=new je,this.resourceClasses=new Oe,this.properties=new Ce},ke=function(){function o(e,t,r){this.resourceClassesForOntology=e,this.resourceClasses=t,this.properties=r}return o.sortFunc=function(e,t){if(e.label===undefined)return 1;if(t.label===undefined)return-1;var r=e.label.toLowerCase(),n=t.label.toLowerCase();return r<n?-1:n<r?1:0},o.prototype.updateOntologyInformation=function(e){var t=e.getResourceClassForOntology();for(var r in t)this.resourceClassesForOntology[r]=t[r];var n=e.getResourceClasses();for(var o in n)this.resourceClasses[o]=n[o];var i=e.getProperties();for(var a in i)this.properties[a]=i[a]},o.prototype.getResourceClassForOntology=function(){return this.resourceClassesForOntology},o.prototype.getResourceClasses=function(){return this.resourceClasses},o.prototype.getResourceClassesAsArray=function(e){void 0===e&&(e=!0);var t=[];for(var r in this.resourceClasses){var n=this.resourceClasses[r];t.push(n)}return t.sort(o.sortFunc),e||t.reverse(),t},o.prototype.getLabelForResourceClass=function(e){if(e!==undefined){var t=this.resourceClasses[e];if(t!==undefined&&t.label!==undefined)return t.label;console.log("cannot get label for "+e)}else console.log("call of OntologyInformation.getLabelForResourceClass without argument resClass")},o.prototype.getProperties=function(){return this.properties},o.prototype.getPropertiesAsArray=function(e){void 0===e&&(e=!0);var t=[];for(var r in this.properties){var n=this.properties[r];t.push(n)}return t.sort(o.sortFunc),e||t.reverse(),t},o.prototype.getLabelForProperty=function(e){if(e!==undefined){var t=this.properties[e];if(t!==undefined&&t.label!==undefined)return t.label;console.log("cannot get label for "+e)}else console.log("call of OntologyInformation.getLabelForProperty without argument property")},o}(),Ee=function(){function e(e){this._ontologyService=e,this.excludedOntologies=[E.SalsahGuiOntology,E.StandoffOntology],this.excludedProperties=[E.RdfsLabel],this.nonResourceClasses=[E.ForbiddenResource,E.XMLToStandoffMapping,E.ListNode],this.cacheOntology=new Ae}return e.prototype.getOntologiesMetadataFromKnora=function(){return this._ontologyService.getOntologiesMetadata().pipe(p.mergeMap(function(e){var t=ve.promises.compact(e.body,{});return i.from(t)}))},e.prototype.getAllEntityDefinitionsForOntologyFromKnora=function(e){return this._ontologyService.getAllEntityDefinitionsForOntologies(e).pipe(p.mergeMap(function(e){var t=ve.promises.compact(e.body,{});return i.from(t)}))},e.prototype.convertAndWriteOntologiesMetadataToCache=function(e){this.cacheOntology.ontologies=e.map(function(e){return new Se(e["@id"],e[E.RdfsLabel])})},e.prototype.getAllOntologiesMetadataFromCache=function(){return this.cacheOntology.ontologies},e.prototype.getResourceClassIrisFromOntologyResponse=function(e){var t,r,n=[];try{for(var o=k(e),i=o.next();!i.done;i=o.next()){var a=i.value,s=a["@id"];s!==E.Resource&&-1===this.nonResourceClasses.indexOf(s)&&a[E.IsResourceClass]!==undefined&&!0===a[E.IsResourceClass]&&n.push(s)}}catch(u){t={error:u}}finally{try{i&&!i.done&&(r=o["return"])&&r.call(o)}finally{if(t)throw t.error}}return n},e.prototype.convertAndWriteAllEntityDefinitionsForOntologyToCache=function(e){var t=e["@graph"],r=t.filter(function(e){return e["@type"]===E.OwlClass}),n=t.filter(function(e){var t=e["@type"];return t===E.OwlObjectProperty||t===E.OwlDatatypeProperty||t===E.OwlAnnotationProperty||t===E.RdfProperty});this.cacheOntology.resourceClassIrisForOntology[e["@id"]]=this.getResourceClassIrisFromOntologyResponse(r),this.convertAndWriteEntityDefinitionsToCache(r,n)},e.prototype.getOntologyInformationFromCache=function(e){var t,r,n=new je,o=[];try{for(var i=k(e),a=i.next();!a.done;a=i.next()){var s=a.value;if(this.cacheOntology.resourceClassIrisForOntology[s]===undefined)throw new Ve("getResourceClassesForOntologiesFromCache: ontology not found in cache: "+s);n[s]=this.cacheOntology.resourceClassIrisForOntology[s],o=o.concat(this.cacheOntology.resourceClassIrisForOntology[s])}}catch(u){t={error:u}}finally{try{a&&!a.done&&(r=i["return"])&&r.call(i)}finally{if(t)throw t.error}}return this.getResourceClassDefinitions(o).pipe(p.map(function(e){return new ke(n,e.getResourceClasses(),e.getProperties())}))},e.prototype.convertAndWriteEntityDefinitionsToCache=function(e,t){var r,n,o,i;try{for(var a=k(e),s=a.next();!s.done;s=a.next()){var u=s.value,p=u["@id"],l=[],c=[];if(u[E.RdfsSubclassOf]!==undefined){var d=void 0;d=Array.isArray(u[E.RdfsSubclassOf])?u[E.RdfsSubclassOf]:[u[E.RdfsSubclassOf]];try{for(var h=k(d),f=h.next();!f.done;f=h.next()){var y=f.value;if(y instanceof Object&&y["@type"]!==undefined&&y["@type"]===E.OwlRestriction){var g=void 0;if(y[E.OwlMinCardinality]!==undefined)g=new be(b.CardinalityOccurrence.minCard,y[E.OwlMinCardinality],y[E.OwlOnProperty]["@id"]);else if(y[E.OwlCardinality]!==undefined)g=new be(b.CardinalityOccurrence.card,y[E.OwlCardinality],y[E.OwlOnProperty]["@id"]);else{if(y[E.OwlMaxCardinality]===undefined)throw new TypeError("cardinality type invalid for "+u["@id"]+" "+y[E.OwlOnProperty]);g=new be(b.CardinalityOccurrence.maxCard,y[E.OwlMaxCardinality],y[E.OwlOnProperty]["@id"])}l.push(g);var m=void 0;y[E.SalsahGuiOrder]!==undefined&&(m=new Pe(y[E.SalsahGuiOrder],y[E.OwlOnProperty]["@id"]),c.push(m))}}}catch(V){o={error:V}}finally{try{f&&!f.done&&(i=h["return"])&&i.call(h)}finally{if(o)throw o.error}}}var v=new Re(p,u[E.ResourceIcon],u[E.RdfsComment],u[E.RdfsLabel],l,c);this.cacheOntology.resourceClasses[p]=v}}catch(S){r={error:S}}finally{try{s&&!s.done&&(n=a["return"])&&n.call(a)}finally{if(r)throw r.error}}this.convertAndWriteKnoraPropertyDefinitionsToOntologyCache(t)},e.prototype.getResourceClassDefinitionsFromCache=function(e){var t=this,r=new Oe,n=[];return e.forEach(function(e){r[e]=t.cacheOntology.resourceClasses[e],t.cacheOntology.resourceClasses[e].cardinalities.forEach(function(e){n.push(e.property)})}),this.getPropertyDefinitions(n).pipe(p.map(function(e){return new ke(new je,r,e.getProperties())}))},e.prototype.convertAndWriteKnoraPropertyDefinitionsToOntologyCache=function(e){var t,r;try{for(var n=k(e),o=n.next();!o.done;o=n.next()){var i=o.value,a=i["@id"],s=!1;i[E.isEditable]!==undefined&&!0===i[E.isEditable]&&(s=!0);var u=!1;i[E.isLinkProperty]!==undefined&&!0===i[E.isLinkProperty]&&(u=!0);var p=!1;i[E.isLinkValueProperty]!==undefined&&!0===i[E.isLinkValueProperty]&&(p=!0);var l=[];i[E.subPropertyOf]!==undefined&&Array.isArray(i[E.subPropertyOf])?l=i[E.subPropertyOf].map(function(e){return e["@id"]}):i[E.subPropertyOf]!==undefined&&l.push(i[E.subPropertyOf]["@id"]);var c=void 0;i[E.ObjectType]!==undefined&&(c=i[E.ObjectType]["@id"]),this.cacheOntology.properties[a]=new Ie(a,c,i[E.RdfsComment],i[E.RdfsLabel],l,s,u,p)}}catch(d){t={error:d}}finally{try{o&&!o.done&&(r=n["return"])&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.getPropertyDefinitionsFromCache=function(e){var t=this,r=new Ce;return e.forEach(function(e){if(!(-1<t.excludedProperties.indexOf(e))){if(t.cacheOntology.properties[e]===undefined)throw new Ve("getPropertyDefinitionsFromCache: property not found in cache: "+e);r[e]=t.cacheOntology.properties[e]}}),new ke(new je,new Oe,r)},e.prototype.getOntologiesMetadata=function(){var t=this;return 0===this.cacheOntology.ontologies.length?this.getOntologiesMetadataFromKnora().pipe(p.map(function(e){return t.convertAndWriteOntologiesMetadataToCache(e["@graph"].filter(function(e){return-1===t.excludedOntologies.indexOf(e["@id"])})),t.getAllOntologiesMetadataFromCache()})):i.of(this.getAllOntologiesMetadataFromCache())},e.prototype.getAndCacheOntologies=function(e){var t=this,r=[];return e.forEach(function(e){r.push(t.getAllEntityDefinitionsForOntologyFromKnora(e).pipe(p.map(function(e){t.convertAndWriteAllEntityDefinitionsForOntologyToCache(e)})))}),i.forkJoin(r)},e.prototype.getEntityDefinitionsForOntologies=function(e){var t=this,r=e.filter(function(e){return t.cacheOntology.resourceClassIrisForOntology[e]===undefined});return 0<r.length?this.getAndCacheOntologies(r).pipe(p.mergeMap(function(){return t.getOntologyInformationFromCache(e)})):this.getOntologyInformationFromCache(e)},e.prototype.getResourceClassDefinitions=function(e){var t=this,r=e.filter(function(e){return t.cacheOntology.resourceClasses[e]===undefined});if(0<r.length){var n=r.map(function(e){return v.getOntologyIriFromEntityIri(e)}).filter(v.filterOutDuplicates);return this.getAndCacheOntologies(n).pipe(p.mergeMap(function(){return t.getResourceClassDefinitionsFromCache(e)}))}return this.getResourceClassDefinitionsFromCache(e)},e.prototype.getPropertyDefinitions=function(t){var r=this,e=t.filter(function(e){return!(-1<r.excludedProperties.indexOf(e))&&r.cacheOntology.properties[e]===undefined});if(0<e.length){var n=e.map(function(e){return v.getOntologyIriFromEntityIri(e)}).filter(v.filterOutDuplicates);return this.getAndCacheOntologies(n).pipe(p.map(function(e){if(e)return r.getPropertyDefinitionsFromCache(t);throw new Error("Problem with: return this.getPropertyDefinitionsFromCache(propertyIris);")}))}return i.of(this.getPropertyDefinitionsFromCache(t))},e.decorators=[{type:a.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:me}]},e.ngInjectableDef=a.defineInjectable({factory:function(){return new e(a.inject(me))},token:e,providedIn:"root"}),e}(),we=function Ct(e,t){this.resources=e,this.numberOfResources=t,this.ontologyInformation=new ke({},{},{})},Le=function jt(e){this.numberOfResults=e},xe=function At(e,t){this.stillImageFileValue=e,this.regions=t},Fe=function(){function e(e){this.regionResource=e}return e.prototype.getGeometries=function(){return this.regionResource.properties[E.hasGeometry]},e}(),Te=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.path="/admin/groups",e}return l(e,t),e.prototype.getAllGroups=function(){return this.httpGet(this.path).pipe(p.map(function(e){return e.getBody(A).groups}),p.catchError(this.handleJsonError))},e.prototype.getGroupByIri=function(e){return this.path+="/"+encodeURIComponent(e),this.httpGet(this.path).pipe(p.map(function(e){return e.getBody(j).group}),p.catchError(this.handleJsonError))},e.decorators=[{type:a.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=a.defineInjectable({factory:function(){return new e(a.inject(s.HttpClient),a.inject(u))},token:e,providedIn:"root"}),e}(ge),De=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.path="/admin/lists",e}return l(e,t),e.prototype.getLists=function(e){return e&&(this.path+="?projectIri="+encodeURIComponent(e)),this.httpGet(this.path).pipe(p.map(function(e){return e.getBody(N).lists}),p.catchError(this.handleJsonError))},e.prototype.getList=function(e){return this.httpGet(this.path+"/"+encodeURIComponent(e)).pipe(p.map(function(e){return e.getBody(J).list}),p.catchError(this.handleJsonError))},e.prototype.getListInfo=function(e){return this.path+="/infos/"+encodeURIComponent(e),this.httpGet(this.path).pipe(p.map(function(e){return e.getBody(F).listinfo}),p.catchError(this.handleJsonError))},e.prototype.getListNodeInfo=function(e){return this.path+="/nodes/"+encodeURIComponent(e),this.httpGet(this.path).pipe(p.map(function(e){return e.getBody(D).nodeinfo}),p.catchError(this.handleJsonError))},e.prototype.createList=function(e){return this.httpPost(this.path,e).pipe(p.map(function(e){return e.getBody(J).list}),p.catchError(this.handleJsonError))},e.prototype.updateListInfo=function(e){return this.path+="/infos/"+encodeURIComponent(e.listIri),this.httpPut(this.path,e).pipe(p.map(function(e){return e.getBody(F).listinfo}),p.catchError(this.handleJsonError))},e.decorators=[{type:a.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=a.defineInjectable({factory:function(){return new e(a.inject(s.HttpClient),a.inject(u))},token:e,providedIn:"root"}),e}(ge),Je=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.getAllProjects=function(){return this.httpGet("/admin/projects").pipe(p.map(function(e){return e.getBody(G).projects}),p.catchError(this.handleJsonError))},t.prototype.getProjectByIri=function(e){var t="/admin/projects/iri/"+encodeURIComponent(e);return this.getProject(t)},t.prototype.getProjectByShortname=function(e){var t="/admin/projects/shortname/"+e;return this.getProject(t)},t.prototype.getProjectByShortcode=function(e){var t="/admin/projects/shortcode/"+e;return this.getProject(t)},t.prototype.getProject=function(e){return this.httpGet(e).pipe(p.map(function(e){return e.getBody(W).project}),p.catchError(this.handleJsonError))},t.prototype.getProjectMembersByIri=function(e){var t="/admin/projects/iri/"+encodeURIComponent(e)+"/members";return this.getProjectMembers(t)},t.prototype.getProjectMembersByShortname=function(e){var t="/admin/projects/shortname/"+e+"/members";return this.getProjectMembers(t)},t.prototype.getProjectMembersByShortcode=function(e){var t="/admin/projects/shortcode/"+e+"/members";return this.getProjectMembers(t)},t.prototype.getProjectMembers=function(e){return this.httpGet(e).pipe(p.map(function(e){return e.getBody(M).members}),p.catchError(this.handleJsonError))},t.prototype.createProject=function(e){return this.httpPost("/admin/projects",e).pipe(p.map(function(e){return e.getBody(W).project}),p.catchError(this.handleJsonError))},t.prototype.updateProject=function(e,t){var r="/admin/projects/iri/"+encodeURIComponent(e);return this.httpPut(r,t).pipe(p.map(function(e){return e.getBody(W).project}),p.catchError(this.handleJsonError))},t.prototype.activateProject=function(e){var t="/admin/projects/iri/"+encodeURIComponent(e);return this.httpPut(t,{status:!0}).pipe(p.map(function(e){return e.getBody(W).project}),p.catchError(this.handleJsonError))},t.prototype.deleteProject=function(e){var t="/admin/projects/iri/"+encodeURIComponent(e);return this.httpDelete(t).pipe(p.map(function(e){return e.getBody(W).project}),p.catchError(this.handleJsonError))},t.decorators=[{type:a.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=a.defineInjectable({factory:function(){return new t(a.inject(s.HttpClient),a.inject(u))},token:t,providedIn:"root"}),t}(ge),Ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.getAllUsers=function(){return this.httpGet("/admin/users").pipe(p.map(function(e){return e.getBody(B).users}),p.catchError(this.handleJsonError))},t.prototype.getUser=function(e,t){var r="/admin/users/"+t+"/"+encodeURIComponent(e);return this.httpGet(r).pipe(p.map(function(e){return e.getBody(q).user}),p.catchError(this.handleJsonError))},t.prototype.getUserByIri=function(e){return this.getUser(e,"iri")},t.prototype.getUserByEmail=function(e){return this.getUser(e,"email")},t.prototype.getUserByUsername=function(e){return this.getUser(e,"username")},t.prototype.getUsersGroupMemberships=function(e){var t="/admin/users/iri/"+encodeURIComponent(e)+"/group-memberships";return this.httpGet(t).pipe(p.map(function(e){return e.getBody(A).groups}),p.catchError(this.handleJsonError))},t.prototype.createUser=function(e){return this.httpPost("/admin/users",e).pipe(p.map(function(e){return e.getBody(q).user}),p.catchError(this.handleJsonError))},t.prototype.addUserToProject=function(e,t){var r="/admin/users/iri/"+encodeURIComponent(e)+"/project-memberships/"+encodeURIComponent(t);return this.httpPost(r).pipe(p.map(function(e){return e.getBody(q).user}),p.catchError(this.handleJsonError))},t.prototype.removeUserFromProject=function(e,t){var r="/admin/users/iri/"+encodeURIComponent(e)+"/project-memberships/"+encodeURIComponent(t);return this.httpDelete(r).pipe(p.map(function(e){return e.getBody(q).user}),p.catchError(this.handleJsonError))},t.prototype.addUserToProjectAdmin=function(e,t){var r="/admin/users/iri/"+encodeURIComponent(e)+"/project-admin-memberships/"+encodeURIComponent(t);return this.httpPost(r).pipe(p.map(function(e){return e.getBody(q).user}),p.catchError(this.handleJsonError))},t.prototype.removeUserFromProjectAdmin=function(e,t){var r="/admin/users/iri/"+encodeURIComponent(e)+"/project-admin-memberships/"+encodeURIComponent(t);return this.httpDelete(r).pipe(p.map(function(e){return e.getBody(q).user}),p.catchError(this.handleJsonError))},t.prototype.addUserToGroup=function(e,t){var r="/admin/users/iri/"+encodeURIComponent(e)+"/group-memberships/"+encodeURIComponent(t);return this.httpPost(r).pipe(p.map(function(e){return e.getBody(q).user}),p.catchError(this.handleJsonError))},t.prototype.removeUserFromGroup=function(e,t){var r="/admin/users/iri/"+encodeURIComponent(e)+"/group-memberships/"+encodeURIComponent(t);return this.httpDelete(r).pipe(p.map(function(e){return e.getBody(q).user}),p.catchError(this.handleJsonError))},t.prototype.addUserToSystemAdmin=function(e){return this.updateUserSystemAdmin(e,{newSystemAdminMembershipStatus:!0})},t.prototype.removeUserFromSystemAdmin=function(e){return this.updateUserSystemAdmin(e,{newSystemAdminMembershipStatus:!1})},t.prototype.updateUserSystemAdmin=function(e,t){var r="/admin/users/iri/"+encodeURIComponent(e)+"/SystemAdmin";return this.httpPut(r,t).pipe(p.map(function(e){return e.getBody(q).user}),p.catchError(this.handleJsonError))},t.prototype.activateUser=function(e){var t="/admin/users/iri/"+encodeURIComponent(e)+"/Status";return this.httpPut(t,{status:!0}).pipe(p.map(function(e){return e.getBody(q).user}),p.catchError(this.handleJsonError))},t.prototype.updateOwnPassword=function(e,t,r){var n="/admin/users/iri/"+encodeURIComponent(e)+"/Password",o={newPassword:r,requesterPassword:t};return this.httpPut(n,o).pipe(p.map(function(e){return e.getBody(q).user}),p.catchError(this.handleJsonError))},t.prototype.updateUsersPassword=function(e,t,r){var n="/admin/users/iri/"+encodeURIComponent(e)+"/Password",o={newPassword:r,requesterPassword:t};return this.httpPut(n,o).pipe(p.map(function(e){return e.getBody(q).user}),p.catchError(this.handleJsonError))},t.prototype.updateBasicUserInformation=function(e,t){var r="/admin/users/iri/"+encodeURIComponent(e)+"/BasicUserInformation";return this.httpPut(r,t).pipe(p.map(function(e){return e.getBody(q).user}),p.catchError(this.handleJsonError))},t.prototype.deleteUser=function(e){var t="/admin/users/iri/"+encodeURIComponent(e);return this.httpDelete(t).pipe(p.map(function(e){return e.getBody(q).user}),p.catchError(this.handleJsonError))},t.decorators=[{type:a.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=a.defineInjectable({factory:function(){return new t(a.inject(s.HttpClient),a.inject(u))},token:t,providedIn:"root"}),t}(ge),Ue=function(){function e(){this.subject=new i.Subject}return e.prototype.setLanguage=function(e){this.subject.next({"var":e})},e.prototype.getLanguage=function(){return this.subject.asObservable()},e.decorators=[{type:a.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=a.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),He=function(){function e(e,t){this._http=e,this.config=t}return e.prototype.getStatusMsg=function(){return this._http.get(this.config.app+"/assets/i18n/statusMsg.json").pipe(p.map(function(e){return e},function(e){console.error(e)}))},e.decorators=[{type:a.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:s.HttpClient},{type:undefined,decorators:[{type:a.Inject,args:[u]}]}]},e.ngInjectableDef=a.defineInjectable({factory:function(){return new e(a.inject(s.HttpClient),a.inject(u))},token:e,providedIn:"root"}),e}();!function(e){var j=function(e){return"@id"!==e&&"@type"!==e&&e!==E.RdfsLabel&&e!==E.attachedToProject&&e!==E.attachedToUser&&e!==E.creationDate&&e!==E.lastModificationDate&&e!==E.hasPermissions&&e!==E.userHasPermission&&e!==E.ArkUrl&&e!==E.versionArkUrl};function S(e){var t=function C(e){var t,r,n,o,i,a,s=e[E.hasStandoffLinkToValue],u=[];if(s!==undefined&&Array.isArray(s))try{for(var p=k(s),l=p.next();!l.done;l=p.next()){var c=l.value,d=A(c,E.hasStandoffLinkToValue,[]);u.push(d)}}catch(R){t={error:R}}finally{try{l&&!l.done&&(r=p["return"])&&r.call(p)}finally{if(t)throw t.error}}else if(s!==undefined){var d=A(s,E.hasStandoffLinkToValue,[]);u.push(d)}var h=Object.keys(e);h=h.filter(j);var f={};try{for(var y=k(h),g=y.next();!g.done;g=y.next()){var m=g.value,v=[];if(Array.isArray(e[m]))try{for(var V=k(e[m]),S=V.next();!S.done;S=V.next()){var b=S.value,P=A(b,m,u);P!==undefined&&v.push(P)}}catch(O){i={error:O}}finally{try{S&&!S.done&&(a=V["return"])&&a.call(V)}finally{if(i)throw i.error}}else{var P=A(e[m],m,u);P!==undefined&&v.push(P)}f[m]=v}}catch(I){n={error:I}}finally{try{g&&!g.done&&(o=y["return"])&&o.call(y)}finally{if(n)throw n.error}}return f}(e);return new he(e["@id"],e["@type"],e[E.RdfsLabel],[],[],[],[],t)}function A(e,t,r){var n,o,i;switch(e["@type"]){case E.TextValue:var a=void 0;if(e[E.valueAsString]!==undefined)a=new _(e["@id"],t,e[E.valueAsString]);else if(e[E.textValueAsHtml]!==undefined){var s={};try{for(var u=k(r),p=u.next();!p.done;p=u.next()){var l=p.value.referredResource;s[l.id]=l}}catch(V){n={error:V}}finally{try{p&&!p.done&&(o=u["return"])&&o.call(u)}finally{if(n)throw n.error}}a=new Q(e["@id"],t,e[E.textValueAsHtml],s)}else e[E.textValueAsXml]!==undefined&&e[E.textValueHasMapping]["@id"]!==undefined?a=new z(e["@id"],t,e[E.textValueAsXml],e[E.textValueHasMapping]["@id"]):console.error("ERROR: Invalid text value: "+JSON.stringify(e));i=a;break;case E.DateValue:i=new $(e["@id"],t,e[E.dateValueHasCalendar],e[E.dateValueHasStartYear],e[E.dateValueHasEndYear],e[E.dateValueHasStartEra],e[E.dateValueHasEndEra],e[E.dateValueHasStartMonth],e[E.dateValueHasEndMonth],e[E.dateValueHasStartDay],e[E.dateValueHasEndDay]);break;case E.LinkValue:var c=void 0;if(e[E.linkValueHasTarget]!==undefined){var d=S(e[E.linkValueHasTarget]);c=new Z(e["@id"],t,d.id,d)}else if(e[E.linkValueHasTargetIri]!==undefined){var h=e[E.linkValueHasTargetIri]["@id"];c=new Z(e["@id"],t,h)}else if(e[E.linkValueHasSource]!==undefined){var f=S(e[E.linkValueHasSource]);c=new Z(e["@id"],t,f.id,f)}else if(e[E.linkValueHasSourceIri]!==undefined){var y=e[E.linkValueHasSourceIri]["@id"];c=new Z(e["@id"],t,y)}i=c;break;case E.IntValue:i=new ee(e["@id"],t,e[E.integerValueAsInteger]);break;case E.DecimalValue:var g=parseFloat(e[E.decimalValueAsDecimal]["@value"]);i=new te(e["@id"],t,g);break;case E.StillImageFileValue:i=new re(e["@id"],t,e[E.fileValueHasFilename],e[E.stillImageFileValueHasIIIFBaseUrl]["@value"],e[E.fileValueAsUrl]["@value"],e[E.stillImageFileValueHasDimX],e[E.stillImageFileValueHasDimY]);break;case E.TextFileValue:i=new oe(e["@id"],t,e[E.fileValueHasFilename],e[E.fileValueAsUrl]["@value"]);break;case E.ColorValue:i=new ie(e["@id"],t,e[E.colorValueAsColor]);break;case E.GeomValue:i=new ue(e["@id"],t,e[E.geometryValueAsGeometry]);break;case E.UriValue:i=new pe(e["@id"],t,e[E.uriValueAsUri]["@value"]);break;case E.BooleanValue:i=new le(e["@id"],t,e[E.booleanValueAsBoolean]);break;case E.IntervalValue:var m=parseFloat(e[E.intervalValueHasStart]["@value"]),v=parseFloat(e[E.intervalValueHasEnd]["@value"]);i=new ce(e["@id"],t,m,v);break;case E.ListValue:i=new de(e["@id"],t,e[E.listValueAsListNode]["@id"],e[E.listValueAsListNodeLabel]);break;default:console.error("ERROR: value type not implemented yet: "+e["@type"]+"("+e["@id"]+")")}return i}function l(e){var t,r,n,o,i=Object.keys(e);i=i.filter(j);var a=[];try{for(var s=k(i),u=s.next();!u.done;u=s.next()){var p=u.value;if(Array.isArray(e[p]))try{for(var l=k(e[p]),c=l.next();!c.done;c=l.next()){var d=c.value;d["@type"]===E.LinkValue&&d[E.linkValueHasTarget]!==undefined?a.push(d[E.linkValueHasTarget]["@type"]):d["@type"]===E.LinkValue&&d[E.linkValueHasSource]!==undefined&&a.push(d[E.linkValueHasSource]["@type"])}}catch(h){n={error:h}}finally{try{c&&!c.done&&(o=l["return"])&&o.call(l)}finally{if(n)throw n.error}}else e[p]["@type"]===E.LinkValue&&e[p][E.linkValueHasTarget]!==undefined?a.push(e[p][E.linkValueHasTarget]["@type"]):e[p]["@type"]===E.LinkValue&&e[p][E.linkValueHasSource]!==undefined&&a.push(e[p][E.linkValueHasSource]["@type"])}}catch(f){t={error:f}}finally{try{u&&!u.done&&(r=s["return"])&&r.call(s)}finally{if(t)throw t.error}}return a}e.createReadResourcesSequenceFromJsonLD=function c(e){var t,r,n,o=[],i=e["@graph"];if(i!==undefined){n=i.length;try{for(var a=k(i),s=a.next();!s.done;s=a.next()){var u=S(s.value);o.push(u)}}catch(p){t={error:p}}finally{try{s&&!s.done&&(r=a["return"])&&r.call(a)}finally{if(t)throw t.error}}}else 0===Object.keys(e).length?n=0:(n=1,u=S(e),o.push(u));return new we(o,n)},e.getResourceClassesFromJsonLD=function d(e){var t,r,n=e["@graph"],o=[];if(n!==undefined)try{for(var i=k(n),a=i.next();!a.done;a=i.next()){var s=a.value;o.push(s["@type"]);var u=l(s);o=o.concat(u)}}catch(p){t={error:p}}finally{try{a&&!a.done&&(r=i["return"])&&r.call(i)}finally{if(t)throw t.error}}else{if(0===Object.keys(e).length)return[];o.push(e["@type"]),u=l(e),o=o.concat(u)}return o.filter(v.filterOutDuplicates)},e.createCountQueryResult=function t(e){return new Le(e[E.schemaNumberOfItems])}}(b.ConvertJSONLD||(b.ConvertJSONLD={}));var Ke=function(o){function e(e,t,r){var n=o.call(this,e,t)||this;return n.http=e,n.config=t,n._ontologyCacheService=r,n}return l(e,o),e.prototype.getResource=function(e){return this.httpGet("/v2/resources/"+encodeURIComponent(e))},e.prototype.getReadResource=function(e){var n=this;return this.httpGet("/v2/resources/"+encodeURIComponent(e)).pipe(p.mergeMap(this.processJSONLD),p.mergeMap(function(e){var t=b.ConvertJSONLD.createReadResourcesSequenceFromJsonLD(e),r=b.ConvertJSONLD.getResourceClassesFromJsonLD(e);return n._ontologyCacheService.getResourceClassDefinitions(r).pipe(p.map(function(e){return t.ontologyInformation.updateOntologyInformation(e),t}))}))},e.decorators=[{type:a.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:s.HttpClient},{type:undefined,decorators:[{type:a.Inject,args:[u]}]},{type:Ee}]},e.ngInjectableDef=a.defineInjectable({factory:function(){return new e(a.inject(s.HttpClient),a.inject(u),a.inject(Ee))},token:e,providedIn:"root"}),e}(ge),Me=function(o){function e(e,t,r){var n=o.call(this,e,t)||this;return n.http=e,n.config=t,n._ontologyCacheService=r,n.convertJSONLDToReadResourceSequence=function(e){var t=b.ConvertJSONLD.createReadResourcesSequenceFromJsonLD(e),r=b.ConvertJSONLD.getResourceClassesFromJsonLD(e);return n._ontologyCacheService.getResourceClassDefinitions(r).pipe(p.map(function(e){return t.ontologyInformation.updateOntologyInformation(e),t}))},n}return l(e,o),e.prototype.doFulltextSearch=function(e,t){if(void 0===t&&(t=0),e===undefined||0===e.length)return i.Observable.create(function(e){return e.error("No search term given for call of SearchService.doFulltextSearch")});var r=new s.HttpParams;return r=r.set("offset",t.toString()),this.httpGet("/v2/search/"+e,r)},e.prototype.doFullTextSearchReadResourceSequence=function(e,t){if(void 0===t&&(t=0),e===undefined||0===e.length)return i.Observable.create(function(e){return e.error("No search term given for call of SearchService.doFulltextSearch")});var r=new s.HttpParams;return r=r.set("offset",t.toString()),this.httpGet("/v2/search/"+e,r).pipe(p.mergeMap(this.processJSONLD),p.mergeMap(this.convertJSONLDToReadResourceSequence))},e.prototype.doFulltextSearchCountQuery=function(e){return e===undefined||0===e.length?i.Observable.create(function(e){return e.error("No search term given for call of SearchService.doFulltextSearchCountQuery")}):this.httpGet("/v2/search/count/"+e)},e.prototype.doFullTextSearchCountQueryCountQueryResult=function(e){return e===undefined||0===e.length?i.Observable.create(function(e){return e.error("No search term given for call of SearchService.doFulltextSearchCountQuery")}):this.httpGet("/v2/search/count/"+e).pipe(p.mergeMap(this.processJSONLD),p.map(b.ConvertJSONLD.createCountQueryResult))},e.prototype.doExtendedSearch=function(e){return e===undefined||0===e.length?i.Observable.create(function(e){return e.error("No Sparql string given for call of SearchService.doExtendedSearch")}):this.httpPost("/v2/searchextended",e)},e.prototype.doExtendedSearchReadResourceSequence=function(e){return e===undefined||0===e.length?i.Observable.create(function(e){return e.error("No Sparql string given for call of SearchService.doExtendedSearch")}):this.httpPost("/v2/searchextended",e).pipe(p.mergeMap(this.processJSONLD),p.mergeMap(this.convertJSONLDToReadResourceSequence))},e.prototype.doExtendedSearchCountQuery=function(e){return e===undefined||0===e.length?i.Observable.create(function(e){return e.error("No Sparql string given for call of SearchService.doExtendedSearchCountQuery")}):this.httpPost("/v2/searchextended/count",e)},e.prototype.doExtendedSearchCountQueryCountQueryResult=function(e){return e===undefined||0===e.length?i.Observable.create(function(e){return e.error("No Sparql string given for call of SearchService.doExtendedSearchCountQuery")}):this.httpPost("/v2/searchextended/count",e).pipe(p.mergeMap(this.processJSONLD),p.map(b.ConvertJSONLD.createCountQueryResult))},e.prototype.searchByLabel=function(e,t,r){if(e===undefined||0===e.length)return i.Observable.create(function(e){return e.error("No search term given for call of SearchService.doFulltextSearch")});var n=new s.HttpParams;return t!==undefined&&(n=n.set("limitToResourceClass",t)),r!==undefined&&(n=n.set("limitToProject",r)),this.httpGet("/v2/searchbylabel/"+encodeURIComponent(e),n)},e.prototype.searchByLabelReadResourceSequence=function(e,t,r){if(e===undefined||0===e.length)return i.Observable.create(function(e){return e.error("No search term given for call of SearchService.doFulltextSearch")});var n=new s.HttpParams;return t!==undefined&&(n=n.set("limitToResourceClass",t)),r!==undefined&&(n=n.set("limitToProject",r)),this.httpGet("/v2/searchbylabel/"+encodeURIComponent(e),n).pipe(p.mergeMap(this.processJSONLD),p.mergeMap(this.convertJSONLDToReadResourceSequence))},e.decorators=[{type:a.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:s.HttpClient},{type:undefined,decorators:[{type:a.Inject,args:[u]}]},{type:Ee}]},e.ngInjectableDef=a.defineInjectable({factory:function(){return new e(a.inject(s.HttpClient),a.inject(u),a.inject(Ee))},token:e,providedIn:"root"}),e}(ge),We=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.getIncomingRegions=function(e,t){var r="\nPREFIX knora-api: <http://api.knora.org/ontology/knora-api/simple/v2#>\n\nCONSTRUCT {\n?region knora-api:isMainResource true .\n\n?region knora-api:hasGeometry ?geom .\n\n?region knora-api:hasComment ?comment .\n\n?region knora-api:hasColor ?color .\n} WHERE {\n?region a knora-api:Region .\n?region a knora-api:Resource .\n\n?region knora-api:isRegionOf <"+e+"> .\nknora-api:isRegionOf knora-api:objectType knora-api:Resource .\n\n<"+e+"> a knora-api:Resource .\n\n?region knora-api:hasGeometry ?geom .\nknora-api:hasGeometry knora-api:objectType knora-api:Geom .\n\n?geom a knora-api:Geom .\n\n?region knora-api:hasComment ?comment .\nknora-api:hasComment knora-api:objectType xsd:string .\n\n?comment a xsd:string .\n\n?region knora-api:hasColor ?color .\nknora-api:hasColor knora-api:objectType knora-api:Color .\n\n?color a knora-api:Color .\n} OFFSET "+t+"\n";return this.doExtendedSearchReadResourceSequence(r)},t.prototype.getStillImageRepresentationsForCompoundResource=function(e,t){var r="\nPREFIX knora-api: <http://api.knora.org/ontology/knora-api/simple/v2#>\n\nCONSTRUCT {\n?page knora-api:isMainResource true .\n\n?page knora-api:seqnum ?seqnum .\n\n?page knora-api:hasStillImageFile ?file .\n} WHERE {\n\n?page a knora-api:StillImageRepresentation .\n?page a knora-api:Resource .\n\n?page knora-api:isPartOf <"+e+"> .\nknora-api:isPartOf knora-api:objectType knora-api:Resource .\n\n<"+e+"> a knora-api:Resource .\n\n?page knora-api:seqnum ?seqnum .\nknora-api:seqnum knora-api:objectType xsd:integer .\n\n?seqnum a xsd:integer .\n\n?page knora-api:hasStillImageFile ?file .\nknora-api:hasStillImageFile knora-api:objectType knora-api:File .\n\n?file a knora-api:File .\n\n} ORDER BY ?seqnum\nOFFSET "+t+"\n";return this.doExtendedSearchReadResourceSequence(r)},t.prototype.getIncomingLinksForResource=function(e,t){var r="\nPREFIX knora-api: <http://api.knora.org/ontology/knora-api/simple/v2#>\n\nCONSTRUCT {\n?incomingRes knora-api:isMainResource true .\n\n?incomingRes ?incomingProp <"+e+"> .\n\n} WHERE {\n\n?incomingRes a knora-api:Resource .\n\n?incomingRes ?incomingProp <"+e+"> .\n\n<"+e+"> a knora-api:Resource .\n\n?incomingProp knora-api:objectType knora-api:Resource .\n\nknora-api:isRegionOf knora-api:objectType knora-api:Resource .\nknora-api:isPartOf knora-api:objectType knora-api:Resource .\n\nFILTER NOT EXISTS {\n ?incomingRes  knora-api:isRegionOf <"+e+"> .\n}\n\nFILTER NOT EXISTS {\n ?incomingRes  knora-api:isPartOf <"+e+"> .\n}\n\n} OFFSET "+t+"\n";return this.doExtendedSearchReadResourceSequence(r)},t.decorators=[{type:a.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=a.defineInjectable({factory:function(){return new t(a.inject(s.HttpClient),a.inject(u),a.inject(Ee))},token:t,providedIn:"root"}),t}(Me),Ge=function kt(e){this.generateGravsearch=e},Be=function(){function e(){this._currentSearchParams=new i.BehaviorSubject(new Ge(function(e){return!1}))}return e.prototype.changeSearchParamsMsg=function(e){this._currentSearchParams.next(e)},e.prototype.getSearchParams=function(){return this._currentSearchParams.getValue()},e.decorators=[{type:a.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=a.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),qe=function(t){function e(e){return t.call(this,e)||this}return l(e,t),e}(Error),Xe=function(){function r(e){this._searchParamsService=e}return r.prototype.convertComplexTypeToSimpleType=function(e){var t=r.typeConversionComplexToSimple[e];if(t!==undefined)return t;throw new qe("complex type "+e+" could not be converted to simple type.")},r.prototype.createGravsearchQuery=function(e,t,r){var p=this;void 0===r&&(r=0);var n="";t!==undefined&&(n="?mainRes a <"+v.convertComplexKnoraApiEntityIritoSimple(t)+"> .");var l=[],c=[],o=e.map(function(e,t){var r,n,o=v.convertComplexKnoraApiEntityIritoSimple(e.property.id);r=e.property.isLinkProperty?E.resourceSimple:p.convertComplexTypeToSimpleType(e.property.objectType);var i="?mainRes <"+o+"> "+(n=e.property.isLinkProperty&&"Exists"!==e.valueLiteral.comparisonOperator.getClassName()?e.valueLiteral.value.toSparql(b.KnoraSchema.simple):"?propVal"+t)+" .",a="<"+o+"> knora-api:objectType <"+r+"> .",s=n+" a <"+r+"> .";i=e.property.isLinkProperty&&"NotEquals"===e.valueLiteral.comparisonOperator.getClassName()?"FILTER NOT EXISTS {\n"+i+"\n"+a+"\n"+s+"\n}":(c.push(i),"\n"+i+"\n"+a+"\n"+s+"\n");var u="";return e.property.isLinkProperty||"Exists"===e.valueLiteral.comparisonOperator.getClassName()||(u="Like"===e.valueLiteral.comparisonOperator.getClassName()?"FILTER regex("+n+", "+e.valueLiteral.value.toSparql(b.KnoraSchema.simple)+', "i")':"Match"===e.valueLiteral.comparisonOperator.getClassName()?"FILTER <"+E.matchFunction+">("+n+", "+e.valueLiteral.value.toSparql(b.KnoraSchema.simple)+")":"FILTER("+n+" "+e.valueLiteral.comparisonOperator.type+" "+e.valueLiteral.value.toSparql(b.KnoraSchema.simple)+")"),e.isSortCriterion&&l.push(n),i+"\n"+u+"\n"}),i="";0<l.length&&(i="\nORDER BY "+l.join(" ")+"\n");var a="\nPREFIX knora-api: <http://api.knora.org/ontology/knora-api/simple/v2#>\nCONSTRUCT {\n\n?mainRes knora-api:isMainResource true .\n\n"+c.join("\n")+"\n\n} WHERE {\n\n?mainRes a knora-api:Resource .\n\n"+n+"\n\n"+o.join("")+"\n\n}\n"+i,s="\nOFFSET "+r+"\n";return 0===r&&this._searchParamsService.changeSearchParamsMsg(new Ge(function(e){return a+"\nOFFSET "+e+"\n"})),a+s},r.typeConversionComplexToSimple={"http://api.knora.org/ontology/knora-api/v2#IntValue":E.xsdInteger,"http://api.knora.org/ontology/knora-api/v2#DecimalValue":E.xsdDecimal,"http://api.knora.org/ontology/knora-api/v2#BooleanValue":E.xsdBoolean,"http://api.knora.org/ontology/knora-api/v2#TextValue":E.xsdString,"http://api.knora.org/ontology/knora-api/v2#DateValue":E.dateSimple,"http://api.knora.org/ontology/knora-api/v2#IntervalValue":E.intervalSimple,"http://api.knora.org/ontology/knora-api/v2#GeomValue":E.geomSimple,"http://api.knora.org/ontology/knora-api/v2#ColorValue":E.colorSimple,"http://api.knora.org/ontology/knora-api/v2#GeonameValue":E.geonameSimple,"http://api.knora.org/ontology/knora-api/v2#UriValue":E.xsdUri,"http://api.knora.org/ontology/knora-api/v2#StillImageFileValue":E.fileSimple,"http://api.knora.org/ontology/knora-api/v2#FileValue":E.fileSimple,"http://api.knora.org/ontology/knora-api/v2#MovingImageFileValue":E.fileSimple,"http://api.knora.org/ontology/knora-api/v2#DDDFileValue":E.fileSimple,"http://api.knora.org/ontology/knora-api/v2#AudioFileValue":E.fileSimple,"http://api.knora.org/ontology/knora-api/v2#DocumentFileValue":E.fileSimple,"http://api.knora.org/ontology/knora-api/v2#TextFileValue":E.fileSimple,"http://api.knora.org/ontology/knora-api/v2#ListValue":E.xsdString},r.decorators=[{type:a.Injectable,args:[{providedIn:"root"}]}],r.ctorParameters=function(){return[{type:Be}]},r.ngInjectableDef=a.defineInjectable({factory:function(){return new r(a.inject(Be))},token:r,providedIn:"root"}),r}(),_e=function(){function e(e,t){this.http=e,this.config=t}return e.prototype.resetTriplestoreContent=function(e){return this.http.post(this.config.api+"/admin/store/ResetTriplestoreContent",e).pipe(p.map(function(e){return e.message},function(e){throw e.error instanceof Error?console.log("StoreService - resetTriplestoreContent - Client-side error occurred.",e):console.log("StoreService - resetTriplestoreContent - Server-side error occurred.",e),e}))},e.decorators=[{type:a.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:s.HttpClient},{type:undefined,decorators:[{type:a.Inject,args:[u]}]}]},e.ngInjectableDef=a.defineInjectable({factory:function(){return new e(a.inject(s.HttpClient),a.inject(u))},token:e,providedIn:"root"}),e}(),Ye=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.getBasicOntology=function(){var e=this.config.app;return this.httpGet(e+"/data/base-data/basic-ontology.json")},t.decorators=[{type:a.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=a.defineInjectable({factory:function(){return new t(a.inject(s.HttpClient),a.inject(u))},token:t,providedIn:"root"}),t}(ge),Qe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l(t,e),t.prototype.getResourceTypesByVoc=function(e){return this.httpGet("/v1/resourcetypes?vocabulary="+encodeURIComponent(e))},t.prototype.getResourceType=function(e){return this.httpGet("/v1/resourcetypes/"+encodeURIComponent(e))},t.decorators=[{type:a.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=a.defineInjectable({factory:function(){return new t(a.inject(s.HttpClient),a.inject(u))},token:t,providedIn:"root"}),t}(ge),ze=function(){function e(){this.type=E.EqualsComparisonOperator,this.label=E.EqualsComparisonLabel}return e.prototype.getClassName=function(){return"Equals"},e}(),$e=function(){function e(){this.type=E.NotEqualsComparisonOperator,this.label=E.NotEqualsComparisonLabel}return e.prototype.getClassName=function(){return"NotEquals"},e}(),Ze=function(){function e(){this.type=E.GreaterThanEqualsComparisonOperator,this.label=E.GreaterThanEqualsComparisonLabel}return e.prototype.getClassName=function(){return"GreaterThanEquals"},e}(),et=function(){function e(){this.type=E.GreaterThanComparisonOperator,this.label=E.GreaterThanComparisonLabel}return e.prototype.getClassName=function(){return"GreaterThan"},e}(),tt=function(){function e(){this.type=E.LessThanComparisonOperator,this.label=E.LessThanComparisonLabel}return e.prototype.getClassName=function(){return"LessThan"},e}(),rt=function(){function e(){this.type=E.LessThanEqualsComparisonOperator,this.label=E.LessThanQualsComparisonLabel}return e.prototype.getClassName=function(){return"LessThanEquals"},e}(),nt=function(){function e(){this.type=E.ExistsComparisonOperator,this.label=E.ExistsComparisonLabel}return e.prototype.getClassName=function(){return"Exists"},e}(),ot=function(){function e(){this.type=E.LikeComparisonOperator,this.label=E.LikeComparisonLabel}return e.prototype.getClassName=function(){return"Like"},e}(),it=function(){function e(){this.type=E.MatchComparisonOperator,this.label=E.MatchComparisonLabel}return e.prototype.getClassName=function(){return"Match"},e}(),at=function Et(e,t){this.comparisonOperator=e,this.value=t},st=function(){function e(e,t){this.value=e,this.type=t}return e.prototype.toSparql=function(e){var t;return t=e===b.KnoraSchema.simple&&Xe.typeConversionComplexToSimple[this.type]!==undefined?Xe.typeConversionComplexToSimple[this.type]:this.type,'"'+this.value+'"^^<'+t+">"},e}(),ut=function(){function e(e){this.iri=e}return e.prototype.toSparql=function(e){return"<"+this.iri+">"},e}(),pt=function wt(e,t,r){this.property=e,this.valueLiteral=t,this.isSortCriterion=r};b.a=Ie,b.KuiCoreConfigToken=u,b.KuiCoreModule=t,b.KuiCoreConfig=f,b.ApiServiceResult=y,b.ApiServiceError=g,b.Utils=v,b.KnoraConstants=E,b.StringLiteral=V,b.DateSalsah=P,b.DateRangeSalsah=R,b.AuthenticationResponse=O,b.Group=C,b.GroupResponse=j,b.GroupsResponse=A,b.List=x,b.ListInfo=w,b.ListInfoResponse=F,b.ListNode=L,b.ListNodeInfo=T,b.ListNodeInfoResponse=D,b.ListResponse=J,b.ListsResponse=N,b.OntologyInfoShort=U,b.PermissionData=H,b.Project=I,b.ProjectMembersResponse=M,b.ProjectResponse=W,b.ProjectsResponse=G,b.UsersResponse=B,b.UserResponse=q,b.User=K,b.ReadTextValue=X,b.ReadTextValueAsString=_,b.ReferredResourcesByStandoffLink=Y,b.ReadTextValueAsHtml=Q,b.ReadTextValueAsXml=z,b.ReadDateValue=$,b.ReadLinkValue=Z,b.ReadIntegerValue=ee,b.ReadDecimalValue=te,b.ReadStillImageFileValue=re,b.ReadMovingImageFileValue=ne,b.ReadTextFileValue=oe,b.ReadColorValue=ie,b.Point2D=ae,b.RegionGeometry=se,b.ReadGeomValue=ue,b.ReadUriValue=pe,b.ReadBooleanValue=le,b.ReadIntervalValue=ce,b.ReadListValue=de,b.ReadResource=he,b.Resource=fe,b.ReadResourcesSequence=we,b.CountQueryResult=Le,b.StillImageRepresentation=xe,b.ImageRegion=Fe,b.Equals=ze,b.NotEquals=$e,b.GreaterThanEquals=Ze,b.GreaterThan=et,b.LessThan=tt,b.LessThanEquals=rt,b.Exists=nt,b.Like=ot,b.Match=it,b.ComparisonOperatorAndValue=at,b.ValueLiteral=st,b.IRI=ut,b.PropertyWithValue=pt,b.ApiService=ge,b.GroupsService=Te,b.ListsService=De,b.ProjectsService=Je,b.UsersService=Ne,b.LanguageService=Ue,b.StatusMsgService=He,b.OntologyService=me,b.OntologyMetadata=Se,b.Cardinality=be,b.GuiOrder=Pe,b.ResourceClass=Re,b.ResourceClasses=Oe,b.Property=Ie,b.Properties=Ce,b.ResourceClassIrisForOntology=je,b.OntologyInformation=ke,b.OntologyCacheService=Ee,b.ResourceService=Ke,b.SearchService=Me,b.IncomingService=We,b.ExtendedSearchParams=Ge,b.SearchParamsService=Be,b.GravsearchGenerationService=Xe,b.StoreService=_e,b.BasicOntologyService=Ye,b.ResourceTypesService=Qe,Object.defineProperty(b,"__esModule",{value:!0})});
//# sourceMappingURL=knora-core.umd.min.js.map